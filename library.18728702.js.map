{"mappings":"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","sources":["src/js/library.js"],"sourcesContent":["import { API_KEY } from './apiKey';\nimport { closeModal, modalMovie } from './modalMovie';\nimport { fetchJsonResponse } from './responseJsonFetch';\nimport { displayMovieCard } from './moviesListRender';\nimport { startLoader, stopLoader } from './loader';\nimport { paginationRender, paginationDestroy } from './pagination';\n\nconst moviesList = document.querySelector('.movies__list');\nconst watchedBtn = document.querySelector('.watched-button');\nconst queueBtn = document.querySelector('.queue-button');\nconst pagination = document.querySelector('.pagination');\n\nlet queueLength = JSON.parse(localStorage.getItem('movies-queue')).length;\nlet watchedLength = JSON.parse(localStorage.getItem('movies-watched')).length;\nlet startId = 0;\nlet endId = 19;\nlet actualPage = 1;\nlet totalPages;\nlet fetchLibrary = () => {\n  moviesList.innerHTML = '';\n  moviesList.dataset.library = 'watched';\n  queueBtn.classList.remove('queue-button--active');\n  watchedBtn.classList.add('watched-button--active');\n  paginationDestroy();\n  if (watchedLength !== 0) {\n    startLoader();\n    watchedLength = JSON.parse(localStorage.getItem('movies-watched')).length;\n    actualPage = 1;\n    startId = 0;\n    endId = 19;\n    let parsedWatched = JSON.parse(localStorage.getItem('movies-watched'));\n    totalPages = Math.ceil(watchedLength / 20);\n    for (let i = startId; i <= endId; i++) {\n      if (parsedWatched[i] !== undefined) {\n        fetchJsonResponse(\n          `https://api.themoviedb.org/3/movie/${parsedWatched[i]}`,\n          {\n            api_key: API_KEY,\n          }\n        ).then(movie => {\n          let genres = movie.genres;\n          let movieGenres = [];\n          for (let i = 0; i < genres.length; i++) {\n            movieGenres.push(genres[i].name);\n          }\n          stopLoader();\n          displayMovieCard(movie, movieGenres);\n        });\n      }\n    }\n    paginationRender(actualPage, totalPages);\n  }\n};\n\nlet fetchQueue = () => {\n  moviesList.innerHTML = '';\n  moviesList.dataset.library = 'queue';\n  watchedBtn.classList.remove('watched-button--active');\n  queueBtn.classList.add('queue-button--active');\n  paginationDestroy();\n  if (queueLength !== 0) {\n    startLoader();\n    queueLength = JSON.parse(localStorage.getItem('movies-queue')).length;\n    actualPage = 1;\n    startId = 0;\n    endId = 19;\n    let parsedQueue = JSON.parse(localStorage.getItem('movies-queue'));\n    totalPages = Math.ceil(queueLength / 20);\n    for (let i = startId; i <= endId; i++) {\n      if (parsedQueue[i] !== undefined) {\n        fetchJsonResponse(\n          `https://api.themoviedb.org/3/movie/${parsedQueue[i]}`,\n          {\n            api_key: API_KEY,\n          }\n        ).then(movie => {\n          let genres = movie.genres;\n          let movieGenres = [];\n          for (let i = 0; i < genres.length; i++) {\n            movieGenres.push(genres[i].name);\n          }\n\n          displayMovieCard(movie, movieGenres);\n        });\n      }\n    }\n    stopLoader();\n    paginationRender(actualPage, totalPages);\n  }\n};\n\npagination.addEventListener('click', evt => {\n  evt.preventDefault;\n  if (evt.target.classList.contains('pagination__button')) {\n    if (\n      evt.target.classList.contains('pagination__button--next') ||\n      evt.target.classList.contains('pagination__button--previous')\n    ) {\n      actualPage = evt.target.dataset.page;\n    }\n    if (evt.target.textContent !== '') {\n      actualPage = evt.target.textContent;\n    }\n  }\n  if (evt.target.classList.contains('pagination__button')) {\n    window.scrollTo(0, 0);\n    if (moviesList.dataset.library === 'watched') {\n      startLoader();\n      moviesList.innerHTML = '';\n      paginationDestroy();\n      let parsedWatched = JSON.parse(localStorage.getItem('movies-watched'));\n      watchedLength = JSON.parse(localStorage.getItem('movies-watched')).length;\n      totalPages = Math.ceil(watchedLength / 20);\n      startId = 0 + 20 * (actualPage - 1);\n      endId = 19 + 20 * (actualPage - 1);\n      for (let i = startId; i <= endId; i++) {\n        if (parsedWatched[i] !== undefined) {\n          fetchJsonResponse(\n            `https://api.themoviedb.org/3/movie/${parsedWatched[i]}`,\n            {\n              api_key: API_KEY,\n            }\n          ).then(movie => {\n            let genres = movie.genres;\n            let movieGenres = [];\n            for (let i = 0; i < genres.length; i++) {\n              movieGenres.push(genres[i].name);\n            }\n            displayMovieCard(movie, movieGenres);\n          });\n        }\n      }\n      paginationRender(+actualPage, +totalPages);\n      stopLoader();\n    }\n    if (moviesList.dataset.library === 'queue') {\n      startLoader();\n      moviesList.innerHTML = '';\n      paginationDestroy();\n      let parsedQueue = JSON.parse(localStorage.getItem('movies-queue'));\n      queueLength = JSON.parse(localStorage.getItem('movies-queue')).length;\n      totalPages = Math.ceil(queueLength / 20);\n      startId = 0 + 20 * (actualPage - 1);\n      endId = 19 + 20 * (actualPage - 1);\n      for (let i = startId; i <= endId; i++) {\n        if (parsedQueue[i] !== undefined) {\n          fetchJsonResponse(\n            `https://api.themoviedb.org/3/movie/${parsedQueue[i]}`,\n            {\n              api_key: API_KEY,\n            }\n          ).then(movie => {\n            let genres = movie.genres;\n            let movieGenres = [];\n            for (let i = 0; i < genres.length; i++) {\n              movieGenres.push(genres[i].name);\n            }\n            displayMovieCard(movie, movieGenres);\n          });\n        }\n      }\n      stopLoader();\n      paginationRender(+actualPage, +totalPages);\n    }\n  }\n});\n\nfetchLibrary();\nqueueBtn.addEventListener('click', fetchQueue);\nwatchedBtn.addEventListener('click', fetchLibrary);\nmoviesList.addEventListener('click', modalMovie);\ncloseModal();\n"],"names":["$93effc6fc56091ad$var$totalPages","$iY7oS","parcelRequire","$93effc6fc56091ad$var$moviesList","document","querySelector","$93effc6fc56091ad$var$watchedBtn","$93effc6fc56091ad$var$queueBtn","$93effc6fc56091ad$var$pagination","$93effc6fc56091ad$var$queueLength","JSON","parse","localStorage","getItem","length","$93effc6fc56091ad$var$watchedLength","$93effc6fc56091ad$var$startId","$93effc6fc56091ad$var$endId","$93effc6fc56091ad$var$actualPage","$93effc6fc56091ad$var$fetchLibrary","innerHTML","dataset","library","classList","remove","add","$jcFG7","paginationDestroy","$kvC6y","startLoader","parsedWatched","Math","ceil","i1","undefined","$igQOg","fetchJsonResponse","concat","api_key","API_KEY","then","movie","genres","movieGenres","i","push","name","stopLoader","$jkJzp","displayMovieCard","paginationRender","addEventListener","evt","preventDefault","target","contains","page","textContent","window","scrollTo","i6","parsedQueue","i5","i3","$8AEpj","modalMovie","closeModal"],"version":3,"file":"library.18728702.js.map"}