async function e(e,t){try{const a=await fetch(e+"?"+new URLSearchParams(t));return await a.json()}catch(e){console.error(e)}}const t=(e,t)=>{const a=n(t);a&&window.localStorage.setItem(a,JSON.stringify(e))},a=e=>{const t=n(e);if(!t)return;const a=window.localStorage.getItem(t);return JSON.parse(a)},n=e=>"watched"===e?"movies-watched":"queue"===e?"movies-queue":(console.error("wronga type key in localStorage"),!1),o={setItem:t,getItem:a,removeItem:(e,o)=>{if(!n(o))return;const l=a(o);if(!l)return;const s=l.filter(((t,a)=>t!==e));t(s,o)}},l=document.querySelector("#loader"),s=document.querySelector("body");let d;const i=()=>{d=e=>{s.style.cursor="none",l.style.left=`${e.clientX}px`,l.style.top=`${e.clientY}px`,l.style.display="block"},document.addEventListener("mousemove",d)},r=()=>{s.style.cursor="auto",document.removeEventListener("mousemove",d),l.style.display="none"},c=document.querySelector(".overlay"),m=(document.querySelector(".modal__window"),document.querySelector(".modal__button-close")),u=document.querySelector(".modal__movie");let _={watched:null,queue:null};const v=e=>"UL"!==e.tagName&&("LI"!==e.tagName?v(e.parentElement):e),p=e=>{"Escape"!==e.key&&27!==e.keyCode||h(!1)},b=e=>{e.currentTarget===e.target&&h(!1)},h=e=>{if(e)return c.classList.remove("overlay--is-hidden"),void c.classList.add("noscroll");c.classList.remove("noscroll"),c.classList.add("overlay--is-hidden"),_.watched.removeEventListener("click",g),_.queue.removeEventListener("click",g),window.removeEventListener("keyup",p),c.removeEventListener("click",b)},g=(e,t)=>{const a=o.getItem(t);let n,l=[];if(a&&(l=[...a]),l.includes(e))return o.removeItem(e,t),_[t].classList.remove(`modal-movie__${t}`),void(_[t].innerText=`Add to ${t}`);l.push(e),o.setItem(l,t),"watched"===t&&(n="queue"),"queue"===t&&(n="watched"),o.removeItem(e,n),_[t].classList.add(`modal-movie__${t}`),_[t].innerText=`Remove from ${t}`,_[n].classList.remove(`modal-movie__${n}`),_[n].innerText=`Add to ${n}`},y=document.querySelector(".movies__list");function w(e,t){let a,n;a=null===e.poster_path?"https://europix.cc/no-poster.png":`https://image.tmdb.org/t/p/w500${e.poster_path}`,n=0===t.length?["Unknown"]:t;let o=`<li class="movie" data-id="${e.id}">\n        <img class="movie__img"\n          src=${a}\n          alt="${e.title} poster." loading="lazy" />\n        <h2 class="movie__title">${e.title}</h2>\n        <div class="movie__info">\n          <p class="movie__detail">\n            ${n.slice(0,4).join(", ")}\n          </p>\n          <p class="movie__detail">|</p>\n          <p class="movie__detail">${e.release_date.slice(0,4)}</>\n        </div>\n      </li>`;y.insertAdjacentHTML("beforeend",o)}const f=document.querySelector(".movies__list"),L=document.querySelector(".watched-button"),$=document.querySelector(".queue-button");let q=()=>{i(),f.innerHTML="",$.classList.remove("queue-button--active"),L.classList.add("watched-button--active"),JSON.parse(localStorage.getItem("movies-watched")).forEach((async t=>{e(`https://api.themoviedb.org/3/movie/${t}`,{api_key:"1d9e7558ae558dc94a5fda2c9843c8eb"}).then((e=>{let t=e.genres;movieGenres=[];for(let e=0;e<t.length;e++)movieGenres.push(t[e].name);w(e,movieGenres)}))})),r()};q(),$.addEventListener("click",(()=>{i(),f.innerHTML="",L.classList.remove("watched-button--active"),$.classList.add("queue-button--active"),JSON.parse(localStorage.getItem("movies-queue")).forEach((async t=>{e(`https://api.themoviedb.org/3/movie/${t}`,{api_key:"1d9e7558ae558dc94a5fda2c9843c8eb"}).then((e=>{let t=e.genres;movieGenres=[];for(let e=0;e<t.length;e++)movieGenres.push(t[e].name);w(e,movieGenres)}))})),r()})),L.addEventListener("click",q),f.addEventListener("click",(async t=>{if(i(),t.target===t.currentTarget)return;const a=v(t.target);if(!a)return;const n=a.dataset.id,l=await e(`https://api.themoviedb.org/3/movie/${n}`,{api_key:"1d9e7558ae558dc94a5fda2c9843c8eb",language:"en-US"});if(!1===l.success)return;const s=o.getItem("watched"),d=o.getItem("queue");let m,y,w="",f="",L="Add to watched",$="Add to queue";s&&s.includes(n)&&(w="modal-movie__watched",L="Remove from watched"),d&&d.includes(n)&&(f="modal-movie__queue",$="Remove from queue"),m=null===l.poster_path?"https://europix.cc/no-poster.png":`https://image.tmdb.org/t/p/w500${l.poster_path}`,y=0===l.genres.length?["Unknown"]:l.genres.map((e=>e.name)).join(", ");const q=`\n                <div class="modal-movie__container">\n                  <img src=${m}\n                    alt="${l.title} poster." class="modal-movie__picture" />\n                  <div class="modal-movie__information">\n                    <h3 class="modal-movie__title">${l.title}</h3>\n                    <table>\n                      <tbody class="modal-movie__table modal-table">\n                        <tr class="modal-table__row">\n                          <td class="modal-table__data modal-table__title">Vote/Votes</td>\n                          <td class="modal-table__data modal-table__information">\n                            <span class="modal-table__number modal-table--orange">\n                              ${Math.round(10*l.vote_average)/10}\n                            </span> / \n                            <span class="modal-table__number modal-table--grey">\n                              ${l.vote_count}\n                            </span>\n                          </td>\n                        </tr>\n                        <tr class="modal-table__row">\n                          <td class="modal-table__data modal-table__title">Popularity</td>\n                          <td class="modal-table__data modal-table__information">\n                            ${Math.round(10*l.popularity)/10}\n                          </td>\n                        </tr>\n                        <tr class="modal-table__row">\n                          <td class="modal-table__data modal-table__title">Original Title</td>\n                          <td class="modal-table__data modal-table__information modal-table--uppercase">\n                            ${l.original_title}\n                          </td>\n                        </tr>\n                        <tr class="modal-table__row">\n                          <td class="modal-table__data modal-table__title">Genre</td>\n                          <td class="modal-table__data modal-table__information">\n                            ${y}\n                          </td>\n                        </tr>\n                      </tbody>\n                    </table>\n                    <div class="modal-movie__overview">\n                      <h4 class="modal-movie__about">About</h4>\n                      <p class="modal-movie__description">\n                        ${l.overview}\n                      </p>\n                    </div>\n                    <div class="modal-movie__buttons movie-button">\n                      <button\n                        type="button"\n                        class="modal-movie__btn ${w}"\n                        data-idfilm=""\n                        data-btn="watched">\n                          ${L}\n                      </button>\n                      <button\n                        type="button"\n                        class="modal-movie__btn ${f}"\n                        data-idfilm=""\n                        data-btn="queue">\n                          ${$}\n                      </button>\n                    </div>\n                  </div>\n                </div>`;u.innerHTML=q,h(!0),window.addEventListener("keyup",p),c.addEventListener("click",b),_.watched=document.querySelector('[data-btn="watched"]'),_.queue=document.querySelector('[data-btn="queue"]'),_.watched.addEventListener("click",(e=>g(n,"watched"))),_.queue.addEventListener("click",(e=>g(n,"queue"))),r()})),m.addEventListener("click",(e=>h(!1)));
//# sourceMappingURL=library.91f30bd4.js.map
