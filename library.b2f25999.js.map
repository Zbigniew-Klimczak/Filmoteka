{"mappings":"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","sources":["src/js/library.js"],"sourcesContent":["import { API_KEY } from './apiKey';\nimport { closeModal, modalMovie } from './modalMovie';\nimport { fetchJsonResponse } from './responseJsonFetch';\nimport { displayMovieCard } from './moviesListRender';\nimport { startLoader, stopLoader } from './loader';\nimport { paginationRender, paginationDestroy } from './pagination';\n\nconst moviesList = document.querySelector('.movies__list');\nconst watchedBtn = document.querySelector('.watched-button');\nconst queueBtn = document.querySelector('.queue-button');\nconst pagination = document.querySelector('.pagination');\n\nlet queueLength = JSON.parse(localStorage.getItem('movies-queue')).length;\nlet watchedLength = JSON.parse(localStorage.getItem('movies-watched')).length;\nlet startId = 0;\nlet endId = 19;\nlet actualPage = 1;\nlet totalPages;\nlet fetchLibrary = () => {\n  moviesList.innerHTML = '';\n  moviesList.dataset.library = 'watched';\n  queueBtn.classList.remove('queue-button--active');\n  watchedBtn.classList.add('watched-button--active');\n  paginationDestroy();\n  if (watchedLength !== 0) {\n    startLoader();\n    watchedLength = JSON.parse(localStorage.getItem('movies-watched')).length;\n    actualPage = 1;\n    startId = 0;\n    endId = 19;\n    let parsedWatched = JSON.parse(localStorage.getItem('movies-watched'));\n    totalPages = Math.ceil(watchedLength / 20);\n    for (let i = startId; i <= endId; i++) {\n      if (parsedWatched[i] !== undefined) {\n        fetchJsonResponse(\n          `https://api.themoviedb.org/3/movie/${parsedWatched[i]}`,\n          {\n            api_key: API_KEY,\n          }\n        ).then(movie => {\n          let genres = movie.genres;\n          let movieGenres = [];\n          for (let i = 0; i < genres.length; i++) {\n            movieGenres.push(genres[i].name);\n          }\n          stopLoader();\n          displayMovieCard(movie, movieGenres);\n        });\n      }\n    }\n    paginationRender(actualPage, totalPages);\n  }\n};\n\nlet fetchQueue = () => {\n  moviesList.innerHTML = '';\n  moviesList.dataset.library = 'queue';\n  watchedBtn.classList.remove('watched-button--active');\n  queueBtn.classList.add('queue-button--active');\n  paginationDestroy();\n  if (queueLength !== 0) {\n    startLoader();\n    queueLength = JSON.parse(localStorage.getItem('movies-queue')).length;\n    actualPage = 1;\n    startId = 0;\n    endId = 19;\n    let parsedQueue = JSON.parse(localStorage.getItem('movies-queue'));\n    totalPages = Math.ceil(queueLength / 20);\n    for (let i = startId; i <= endId; i++) {\n      if (parsedQueue[i] !== undefined) {\n        fetchJsonResponse(\n          `https://api.themoviedb.org/3/movie/${parsedQueue[i]}`,\n          {\n            api_key: API_KEY,\n          }\n        ).then(movie => {\n          let genres = movie.genres;\n          let movieGenres = [];\n          for (let i = 0; i < genres.length; i++) {\n            movieGenres.push(genres[i].name);\n          }\n\n          displayMovieCard(movie, movieGenres);\n        });\n      }\n    }\n    stopLoader();\n    paginationRender(actualPage, totalPages);\n  }\n};\n\npagination.addEventListener('click', evt => {\n  evt.preventDefault;\n  if (evt.target.classList.contains('pagination__button')) {\n    if (\n      evt.target.classList.contains('pagination__button--next') ||\n      evt.target.classList.contains('pagination__button--previous')\n    ) {\n      actualPage = evt.target.dataset.page;\n    }\n    if (evt.target.textContent !== '') {\n      actualPage = evt.target.textContent;\n    }\n  }\n  if (evt.target.classList.contains('pagination__button')) {\n    window.scrollTo(0, 0);\n    if (moviesList.dataset.library === 'watched') {\n      startLoader();\n      moviesList.innerHTML = '';\n      paginationDestroy();\n      let parsedWatched = JSON.parse(localStorage.getItem('movies-watched'));\n      watchedLength = JSON.parse(localStorage.getItem('movies-watched')).length;\n      totalPages = Math.ceil(watchedLength / 20);\n      startId = 0 + 20 * (actualPage - 1);\n      endId = 19 + 20 * (actualPage - 1);\n      for (let i = startId; i <= endId; i++) {\n        if (parsedWatched[i] !== undefined) {\n          fetchJsonResponse(\n            `https://api.themoviedb.org/3/movie/${parsedWatched[i]}`,\n            {\n              api_key: API_KEY,\n            }\n          ).then(movie => {\n            let genres = movie.genres;\n            let movieGenres = [];\n            for (let i = 0; i < genres.length; i++) {\n              movieGenres.push(genres[i].name);\n            }\n            displayMovieCard(movie, movieGenres);\n          });\n        }\n      }\n      paginationRender(+actualPage, +totalPages);\n      stopLoader();\n    }\n    if (moviesList.dataset.library === 'queue') {\n      startLoader();\n      moviesList.innerHTML = '';\n      paginationDestroy();\n      let parsedQueue = JSON.parse(localStorage.getItem('movies-queue'));\n      queueLength = JSON.parse(localStorage.getItem('movies-queue')).length;\n      totalPages = Math.ceil(queueLength / 20);\n      startId = 0 + 20 * (actualPage - 1);\n      endId = 19 + 20 * (actualPage - 1);\n      for (let i = startId; i <= endId; i++) {\n        if (parsedQueue[i] !== undefined) {\n          fetchJsonResponse(\n            `https://api.themoviedb.org/3/movie/${parsedQueue[i]}`,\n            {\n              api_key: API_KEY,\n            }\n          ).then(movie => {\n            let genres = movie.genres;\n            let movieGenres = [];\n            for (let i = 0; i < genres.length; i++) {\n              movieGenres.push(genres[i].name);\n            }\n            displayMovieCard(movie, movieGenres);\n          });\n        }\n      }\n      stopLoader();\n      paginationRender(+actualPage, +totalPages);\n    }\n  }\n});\n\nfetchLibrary();\nqueueBtn.addEventListener('click', fetchQueue);\nwatchedBtn.addEventListener('click', fetchLibrary);\nmoviesList.addEventListener('click', modalMovie);\ncloseModal();\n"],"names":["$kJhAR","parcelRequire","$1cafa503bc57b7a0$var$moviesList","document","querySelector","$1cafa503bc57b7a0$var$watchedBtn","$1cafa503bc57b7a0$var$queueBtn","$1cafa503bc57b7a0$var$pagination","$1cafa503bc57b7a0$var$totalPages","$1cafa503bc57b7a0$var$queueLength","JSON","parse","localStorage","getItem","length","$1cafa503bc57b7a0$var$watchedLength","$1cafa503bc57b7a0$var$startId","$1cafa503bc57b7a0$var$endId","$1cafa503bc57b7a0$var$actualPage","$1cafa503bc57b7a0$var$fetchLibrary","innerHTML","dataset","library","classList","remove","add","$2nhTy","paginationDestroy","$gjiCh","startLoader","parsedWatched","Math","ceil","i1","undefined","$14BL6","fetchJsonResponse","api_key","API_KEY","then","movie","genres","movieGenres","i","push","name","stopLoader","$lSHi4","displayMovieCard","paginationRender","addEventListener","evt","preventDefault","target","contains","page","textContent","window","scrollTo","i5","parsedQueue","i8","i3","$bnGUG","modalMovie","closeModal"],"version":3,"file":"library.b2f25999.js.map"}